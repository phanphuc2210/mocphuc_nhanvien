<div class="h-full p-4 dark:bg-slate-700">
    <h2 class="text-3xl mb-5 font-bold dark:text-slate-100">Thống kê doanh thu</h2>

    <form class="flex-col justify-center items-center mt-6" [formGroup]="dateForm">
        <div class="w-[50%] mx-auto grid grid-cols-2 gap-4">
            <div class="mb-6">
                <span class="block mb-2 text-sm font-semibold text-gray-900 dark:text-white">Từ ngày</span>
                <input
                    type="date"
                    formControlName="from"
                    class="my-input"
                />
            </div>
            <div class="mb-6">
                <span class="block mb-2 text-sm font-semibold text-gray-900 dark:text-white">Đến ngày</span>
                <input
                    type="date"
                    formControlName="to"
                    class="my-input"
                />
            </div>
        </div>

        <div class="flex justify-center gap-4">
            <button (click)="statis()" type="button" class="py-2 px-3 text-sm font-medium text-center text-white bg-gray-900 rounded-lg hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-gray-300 dark:bg-gray-900 dark:hover:bg-gray-800 dark:focus:ring-gray-800">Thống kê</button>
            <button type="reset" class="py-2 px-3 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Reset</button>
        </div>
    </form>
    <hr class="my-3 w-96 mx-auto">

    <div *ngIf="statisList">
        <div class="overflow-x-auto shadow-md sm:rounded-lg">
            <table class="w-full text-sm text-center text-gray-900 dark:text-gray-400">
                <thead class="text-sm text-gray-700 bg-gray-50 dark:bg-gray-900 dark:text-gray-400">
                    <tr>
                        <th scope="col" class="px-6 py-3">
                            Mã sản phẩm
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Hình ảnh
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Tên sản phẩm
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Đơn giá
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Số lượng đã bán
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Tổng tiền
                        </th>
                    </tr>
                </thead>
                <tbody *ngIf="statisList.length > 0; else noProduct">
                    <tr *ngFor="let product of statisList" class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                        <td class="px-6 py-4">
                            #{{ product.productId }}
                        </td>
                        <td class="px-6 py-4">
                            <img class="w-16 mx-auto" src="{{ product.image }}" alt="{{ product.name }}">
                        </td>
                        <td class="px-6 py-4">
                            {{ product.name }}
                        </td>
                        <td class="px-6 py-4">
                            {{ product.price | currency:"VND":'vnđ':'':'vi' }}
                        </td>
                        <td class="px-6 py-4">
                            {{ product.quantity }}
                        </td>
                        <td class="px-6 py-4">
                            {{ product.price! * product.quantity | currency:"VND":'vnđ':'':'vi' }}
                        </td>
                    </tr>
                </tbody>
                <ng-template #noProduct>
                    <tr>
                        <td colspan="6">
                            <p class="py-4">
                                Không có sản phẩm nào được bán trong khoảng thời gian này!
                            </p>
                        </td>
                    </tr>
                </ng-template>
            </table>
        </div>
        <div class="mt-6 flex flex-col items-end gap-3">
            <p class="text-lg font-bold">Tổng doanh thu: <span class="text-red-600">{{ revenue | currency:"VND":'vnđ':'':'vi'}}</span></p>
        </div>
    </div>
</div>
